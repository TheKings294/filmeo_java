<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org" th:replace="~{base :: layout(~{::section})}">
<head>
    <title>CineStream | Movies</title>
</head>
<body>
<section class="bg-black text-white">
    <div th:replace="fragments/navbar :: body"></div>

    <main class="p-8">
        <div>
            <h1 class="text-center text-8xl mb-8">Movies</h1>
        </div>

        <div th:if="${movies != null and !#lists.isEmpty(movies)}"
             class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">

            <th:block th:each="movie : ${movies}">
                <a th:href="@{/movies/{id}(id=${movie.id})}">
                    <div th:replace="fragments/media-card :: mediaCard(
                 ${movie.title},
                 ${movie.poster},
                 'MOVIE',
                 ${avgByMovieId[movie.id]}
                 )">
                    </div>
                </a>
            </th:block>

        </div>

        <div class="flex justify-center mt-5"
             th:if="${page.totalPages > 1}">

            <div class="inline-flex items-center gap-2 mb-1">

                <!-- PREVIOUS -->
                <a th:if="${page.hasPrevious()}"
                   th:href="@{${currentPath}(pageNumber=${page.number - 1})}"
                   class="px-5 py-2 rounded-lg bg-neutral-900 border border-neutral-800
                  text-neutral-300 hover:bg-neutral-800 hover:text-white
                  transition">
                    ‚Üê Prev
                </a>

                <span th:unless="${page.hasPrevious()}"
                      class="px-5 py-2 rounded-lg bg-neutral-950 border border-neutral-900
                     text-neutral-600 cursor-not-allowed">
                    ‚Üê Prev
                </span>

                <!-- PAGE INFO -->
                <span class="px-4 py-2 text-sm text-neutral-400">
                    Page <span th:text="${page.number + 1}"></span>
                    /
                <span th:text="${page.totalPages}"></span>
                </span>

                <!-- NEXT -->
                <a th:if="${page.hasNext()}"
                   th:href="@{${currentPath}(pageNumber=${page.number + 1})}"
                   class="px-5 py-2 rounded-lg bg-red-600 text-white
                  hover:bg-red-700 transition">
                    Next ‚Üí
                </a>

                <span th:unless="${page.hasNext()}"
                      class="px-5 py-2 rounded-lg bg-neutral-950 border border-neutral-900
                     text-neutral-600 cursor-not-allowed">
                    Next ‚Üí
                </span>

            </div>
        </div>

        <div th:if="${movies == null or #lists.isEmpty(movies)}"
             class="text-center text-gray-400 mt-10">
            <p>No movies found üé¨</p>
        </div>
    </main>


    <div th:replace="fragments/footer :: body"></div>

</section>
</body>
</html>